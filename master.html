<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
<script src="/socket.io/socket.io.js"></script>
<style>
body { text-align:center; background:#222; color:white; font-family:'Tahoma'; }
h1 { margin-top:30px; font-size:48px; }
input { width:70%; padding:15px; font-size:25px; border-radius:12px; border:none; margin-top:20px; }
button { margin:12px; padding:18px; font-size:28px; border-radius:15px; border:none; color:white; }
#loginBtn { background:#27ae60; width:70%; }
#reset { background:#444; width:60%; }
#mystery { background:#9b59b6; width:70%; }
.scoreBox { font-size:35px; margin-top:20px; }
#winner { font-size:45px; margin:20px 0; }
</style>
</head>
<body>
<div id="login">
  <h1>ğŸ” Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø­ÙƒÙ…</h1>
  <input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
  <br>
  <button id="loginBtn" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
  <div id="error" style="color:#e74c3c; font-size:25px; margin-top:15px;"></div>
</div>
<div id="panel" style="display:none;">
<h1>ğŸ›  Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>
<div id="winner"></div>
<button id="reset" onclick="resetGame()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¬ÙˆÙ„Ø©</button>
<h2>ğŸ Ø§Ù„Ù…Ø³ØªØ±ÙŠ Ø¨ÙˆÙƒØ³</h2>
<button id="mystery" onclick="openMystery()">Ø§ÙØªØ­ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚</button>
<div id="mysteryResult" style="font-size:38px; margin-top:20px; color:gold;"></div>
<h2>ğŸ“Š Ø§Ù„Ù†Ù‚Ø§Ø·</h2>
<div class="scoreBox">
    ÙØ±ÙŠÙ‚ A: <span id="scoreA">0</span>
    <button style="background:#1E90FF;" onclick="add('A')">+</button>
    <button style="background:#1E90FF;" onclick="removePoint('A')">-</button>
</div>
<div class="scoreBox">
    ÙØ±ÙŠÙ‚ B: <span id="scoreB">0</span>
    <button style="background:#FF3030;" onclick="add('B')">+</button>
    <button style="background:#FF3030;" onclick="removePoint('B')">-</button>
</div>
</div>
<script>
let socket = io();
const PASSWORD = "1212";

function login(){
  let pass = document.getElementById("password").value;
  if (pass === PASSWORD){
    document.getElementById("login").style.display = "none";
    document.getElementById("panel").style.display = "block";
  } else {
    document.getElementById("error").innerText = "âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø®Ø§Ø·Ø¦Ø©";
  }
}

let prizes = [
  "ğŸ Ø¯Ø¨Ù„ Ø§Ù„Ù†Ù‚Ø§Ø·",
  "ğŸ Ø®ØµÙ… Ù†Ù‚Ø·Ø©",
  "ğŸ Ø¥Ø¶Ø§ÙØ© Ù†Ù‚Ø·Ø©",
  "ğŸ Ø³Ø¤Ø§Ù„ Ø®Ø§Øµ",
  "ğŸ ØªØ¬Ù…ÙŠØ¯ Ø§Ù„Ø®ØµÙ…",
  "ğŸ Ø¬ÙˆÙ„Ø© Ø¥Ø¶Ø§ÙÙŠØ©",
  "ğŸ Ø¨Ø·Ø§Ù‚Ø© Ø¥Ù†Ù‚Ø§Ø°"
];

socket.on("winner", (team)=>{
    document.getElementById("winner").innerHTML =
        (team === "A") ? "ğŸ”µ ÙØ±ÙŠÙ‚ A Ø¶ØºØ· Ø£ÙˆÙ„!" : "ğŸ”´ ÙØ±ÙŠÙ‚ B Ø¶ØºØ· Ø£ÙˆÙ„!";
});

socket.on("resetAll", ()=>{
    document.getElementById("winner").innerHTML = "";
    document.getElementById("mysteryResult").innerHTML = "";
});

socket.on("mysteryResult", (p)=>{
    document.getElementById("mysteryResult").innerHTML = p;
});

socket.on("scoreUpdate", (d)=>{
    document.getElementById("scoreA").innerHTML = d.A;
    document.getElementById("scoreB").innerHTML = d.B;
});

function resetGame(){ socket.emit("reset"); }
function openMystery(){
    let prize = prizes[Math.floor(Math.random()*prizes.length)];
    socket.emit("mystery", prize);
}
function add(team){ socket.emit("addPoint", team); }
function removePoint(team){ socket.emit("removePoint", team); }
</script>
</body>
</html>
